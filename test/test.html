<html>
    </head> 
        <script src="https://unpkg.com/bsv@1.5.4/bsv.min.js"></script>
        <script src="https://www.moneybutton.com/moneybutton.js"></script>
    </head>
    <body><input type="text" id="txt" onkeyup="render()">
    <div id="mb"></div>

<script>
    render = () => {
        const div = document.getElementById('mb');
        const name = document.getElementById('txt').value;
        const age = 99;

        const owner = "1Kc8XRNryDycwvfEQiFF2TZwD1CVhgwGy2";

        const location = "3f9de452f0c3c96be737d42aa0941b27412211976688967adb3174ee18b04c64_o1";


        const state = {"cls":{"$jig":location},"kind":"jig","props":{"age":age,"location":"_o1","name":name,"nonce":1,"origin":"_o1","owner":owner,"satoshis":0},"version":"04"};

        const stateBuffer = bsv.deps.Buffer.from(JSON.stringify(state), 'utf8');
        const stateHash = bsv.crypto.Hash.sha256(stateBuffer);
        const out_hash = stateHash.toString('hex');

        const raw = {"in":0,"ref":[location],"out":[out_hash],"del":[],"cre":[owner],"exec":[{"op":"NEW","data":[{"$jig":0},[name,age]]}]};

        const script = bsv.Script.buildSafeDataOut(['run','\x05','Run â–¸ Lessons',JSON.stringify(raw)]).toASM();


        moneyButton.render(div, {
            outputs: [{
                script,
                amount: '0',
                currency: 'BSV'
            },
            {
                to: owner,
                amount: "0.00000546",
                currency: "BSV"
            }
            ]
        })
    }
</script></body></html>

